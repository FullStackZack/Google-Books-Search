{"ast":null,"code":"import _classCallCheck from \"/Users/keshapatel/Homework/Google-Books-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/keshapatel/Homework/Google-Books-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/keshapatel/Homework/Google-Books-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/keshapatel/Homework/Google-Books-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/keshapatel/Homework/Google-Books-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/keshapatel/Homework/Google-Books-Search/client/src/pages/Search.js\";\nimport React, { Component } from \"react\";\nimport API from \"../utils/API\";\nimport Search from \"../components/Search\";\nimport Results from \"../components/Results\";\n\nvar newSearch = /*#__PURE__*/function (_Component) {\n  _inherits(newSearch, _Component);\n\n  function newSearch() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, newSearch);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(newSearch)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      search: \"\",\n      books: [],\n      error: \"\",\n      message: \"\"\n    };\n\n    _this.handleInputChange = function (event) {\n      _this.setState({\n        search: event.target.value\n      });\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault();\n      API.getBook(_this.state.search).then(function (res) {\n        if (res.data.items === \"error\") {\n          throw new Error(res.data.items);\n        } else {\n          var results = res.data.items;\n          results = results.map(function (result) {\n            result = {\n              key: result.id,\n              id: result.id,\n              title: result.volumeInfo.title,\n              authors: result.volumeInfo.authors,\n              description: result.volumeInfo.description,\n              image: result.volumeInfo.imageLinks.thumbnail,\n              link: result.volumeInfo.infoLink\n            };\n            return result;\n          });\n\n          _this.setState({\n            books: results,\n            error: \"\"\n          });\n        }\n\n        ;\n      }).catch(function (err) {\n        return _this.setState({\n          error: err.items\n        });\n      });\n    };\n\n    _this.handleSavedButton = function (event) {\n      event.preventDefault();\n      console.log(_this.state.books);\n\n      var savedBooks = _this.state.books.filter(function (book) {\n        return book.id === event.target.id;\n      });\n\n      savedBooks = savedBooks[0];\n      API.saveBook(savedBooks).then(_this.setState({\n        message: alert(\"Your book is saved\")\n      })).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(newSearch, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        search: this.state.search,\n        handleInputChange: this.handleInputChange,\n        handleFormSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }\n      }, \"Results\"), /*#__PURE__*/React.createElement(Results, {\n        books: this.state.books,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }\n      })));\n    }\n  }]);\n\n  return newSearch;\n}(Component);\n\n;\nexport default newSearch;","map":{"version":3,"sources":["/Users/keshapatel/Homework/Google-Books-Search/client/src/pages/Search.js"],"names":["React","Component","API","Search","Results","newSearch","state","search","books","error","message","handleInputChange","event","setState","target","value","handleFormSubmit","preventDefault","getBook","then","res","data","items","Error","results","map","result","key","id","title","volumeInfo","authors","description","image","imageLinks","thumbnail","link","infoLink","catch","err","handleSavedButton","console","log","savedBooks","filter","book","saveBook","alert"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../utils/API\";\nimport Search from \"../components/Search\";\nimport Results from \"../components/Results\";\n\nclass newSearch extends Component {\n\tstate = {\n\t\tsearch: \"\",\n\t\tbooks: [],\n\t\terror: \"\",\n\t\tmessage: \"\"\n\t};\n\n\thandleInputChange = event => {\n\t\tthis.setState({ search: event.target.value })\n\t}\n\n\thandleFormSubmit = event => {\n\t\tevent.preventDefault();\n\t\tAPI.getBook(this.state.search)\n\t\t\t.then(res => {\n\t\t\t\tif (res.data.items === \"error\") {\n\t\t\t\t\tthrow new Error(res.data.items);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlet results = res.data.items\n\t\t\t\t\tresults = results.map(result => {\n\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\tkey: result.id,\n\t\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\t\ttitle: result.volumeInfo.title,\n\t\t\t\t\t\t\tauthors: result.volumeInfo.authors,\n\t\t\t\t\t\t\tdescription: result.volumeInfo.description,\n\t\t\t\t\t\t\timage: result.volumeInfo.imageLinks.thumbnail,\n\t\t\t\t\t\t\tlink: result.volumeInfo.infoLink\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t\t\tthis.setState({ books: results, error: \"\" })\n\t\t\t\t};\n\t\t\t})\n\t\t\t.catch(err => this.setState({ error: err.items }));\n\t};\n\n\thandleSavedButton = event => {\n\t\tevent.preventDefault();\n\t\tconsole.log(this.state.books)\n\t\tlet savedBooks = this.state.books.filter(book => book.id === event.target.id)\n\t\tsavedBooks = savedBooks[0];\n\t\tAPI.saveBook(savedBooks)\n\t\t\t.then(this.setState({ message: alert(\"Your book is saved\") }))\n\t\t\t.catch(err => console.log(err))\n\t};\n\trender() {\n\t\treturn (\n\n\t\t\t<div>\n\t\t\t\t<Search\n\t\t\t\t\tsearch={this.state.search}\n\t\t\t\t\thandleInputChange={this.handleInputChange}\n\t\t\t\t\thandleFormSubmit={this.handleFormSubmit}\n\t\t\t\t/>\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<h2>Results</h2>\n\t\t\t\t\t<Results books={this.state.books} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n};\n\nexport default newSearch;"]},"metadata":{},"sourceType":"module"}